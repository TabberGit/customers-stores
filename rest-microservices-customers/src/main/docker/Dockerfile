FROM java:7
VOLUME /tmp
ADD rest-microservices-customers-1.0.0.BUILD-SNAPSHOT.jar /app.jar
RUN bash -c 'touch /app.jar'
ENV HOST_PORT ${HOST_PORT}
ENV RABBITMQ_PORT ${RABBITMQ_PORT}
ENV RABBITMQ_HOST ${RABBITMQ_HOST}
ENV RABBITMQ_USERNAME ${RABBITMQ_USERNAME}
ENV RABBITMQ_PASSWORD ${RABBITMQ_PASSWORD}
ENV CONFIG_SERVER_URI ${CONFIG_SERVER_URI}
ENV EUREKA_IP_ADDRESS ${EUREKA_IP_ADDRESS}
ENV HOST_IP ${HOST_IP}
ENV MYSQL_HOST_ADDR ${MYSQL_HOST_ADDR}
ENV MYSQL_USERNAME ${MYSQL_USERNAME}
ENV MYSQL_PASSWORD ${MYSQL_PASSWORD}
EXPOSE 9000
ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-Dspring.profiles.active=mysql","-jar","/app.jar"]
